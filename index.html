<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>COVID-GAME</title>
</head>

<body>
    <p>ゲームUIです。</p>
    
    <input type="text" id="body" size="40">
    <input type="button" value="send" id="send">
    <!--- JavaScriptインラインスクリプト -->
    <script type = "text/javascript" >
        function clickBtn() {
            alert('Javascriptを使ってアラートを表示しています！');
        }
        
        //console.log(b);
        function send_body(){
            body = document.getElementById('body');
            const controller = new AbortController();
            fetch("http://"+ipAdress+":8888/"+"kask",{
                method: 'POST',
                body: body,
                signal : controller.signal
            })
            //172.16.211.185
            //通信に失敗したエラー
            .then(async res => {
                if(!res.ok){
                    throw new Error(`Request Failed: ${res.status}`);
                }
            })
            .catch(e => {
                //timeoutの時
                if(e.name !== 'AbortError'){

                }
            });
            //TimeOutまでの時間(今は1000/30秒)
            setTimeout(() => {
                controller.abort();
            }, 1000/30);

        }

        ipAdress = "192.168.0.5";
        let send =document.getElementById('send');
        send.addEventListener('click', send_body);
        //send();

    </script>   
</body>

</html>
